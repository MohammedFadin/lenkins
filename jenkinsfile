pipeline {
    currentBuild.result = "SUCCESS"

    try {
        stage('Checkout') {
            checkout scm
        }
    } catch(error) {
        print "error is ${error}"
    }

    stage('Test') {
        steps{
        env.NODE_ENV = "test"
        print "Running Environment is: ${env.NODE_ENV}"

        sh 'node -v'
        sh 'npm prune'
        sh 'npm i'
        sh 'npm test'
        }
    }
}